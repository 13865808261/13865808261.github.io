<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>简单聊天室</title>
  </head>
  <body>
    <h1>简单聊天室</h1>
    <div id="chatlog"></div>
    <form onsubmit="sendMessage(); return false;">
      <input type="text" id="username" placeholder="请输入用户名" required>
      <input type="text" id="message" placeholder="请输入消息" required>
      <button type="submit">发送</button>
    </form>

    <script>
      let history = [];

      // 发送消息到服务器
      function sendMessage() {
        let username = document.getElementById("username").value;
        let message = document.getElementById("message").value;

        // 发送消息到服务器的代码

        addMessage(username, message);
        document.getElementById("message").value = "";
      }

      // 添加消息到聊天记录
      function addMessage(username, message) {
        history.push({username: username, message: message});
        let chatlog = document.getElementById("chatlog");
        let messageElement = document.createElement("div");
        messageElement.innerText = `${username}: ${message}`;
        chatlog.appendChild(messageElement);
      }

      // 初始化聊天记录
      function initChatlog() {
        for (let i = 0; i < history.length; i++) {
          addMessage(history[i].username, history[i].message);
        }
      }

      window.onload = function() {
        initChatlog();
      };
    </script>
  </body>
</html>
